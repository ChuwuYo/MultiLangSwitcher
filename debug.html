<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="color-scheme" content="light dark">
  <title></title>
  <link href="bootstrap.min.css" rel="stylesheet">
  <link href="fonts/MapleMonoNL-Regular.woff2" rel="stylesheet">
  <link href="toggle.css" rel="stylesheet">
  <style>
    body {
      padding: 20px;
    }

    .debug-section {
      position: relative;
      margin-bottom: 20px;
      padding: 15px;
      border-radius: 5px;
      background-color: #f8f9fa;
    }

    .debug-result {
      margin-top: 10px;
      padding: 10px;
      border-radius: 5px;
      background-color: #fff;
      border: 1px solid #dee2e6;
      max-height: 300px;
      overflow-y: auto;
      word-break: break-all;
      white-space: pre-wrap;
      font-size: 0.9em;
    }

    .success {
      color: green;
      font-weight: bold;
    }

    .error {
      color: rgb(240, 101, 101);
      font-weight: bold;
    }

    /* 日志不同类型的颜色 */
    .log-info {
      color: rgb(165, 165, 250);
    }

    .log-warning {
      color: orange;
    }

    .log-error {
      color: rgb(248, 115, 115);
    }

    .log-success {
      color: green;
    }

    @font-face {
      font-family: 'MapleMonoNL';
      src: url('fonts/MapleMonoNL-Regular.woff2') format('woff2');
    }

    body {
      font-family: 'MapleMonoNL', sans-serif;
    }

    /* 匹配规则详情的样式 */
    .matched-rule-detail {
      margin-left: 15px;
      border-left: 2px solid #007bff;
      padding-left: 10px;
      margin-bottom: 5px;
    }

    .reset-btn-corner {
      position: absolute;
      top: 10px;
      right: 10px;
    }
  </style>
</head>

<body>
  <button id="themeToggleBtn" class="toggle" title="Toggle Theme"></button>

  <div class="container">
    <h2 id="pageHeading"></h2>
    <p class="lead" id="pageSubtitle"></p>

    <div class="alert alert-info">
      <strong id="tipLabel"></strong> <span id="tipText"></span>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="debug-section">
          <h4 id="currentRulesTitle"></h4>
          <p class="text-muted" id="currentRulesDesc"></p>
          <button id="showRulesBtn" class="btn btn-primary"></button>
          <div id="rulesResult" class="debug-result"></div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="debug-section">
          <h4 id="headerTestTitle"></h4>
          <p class="text-muted" id="headerTestDesc"></p>
          <div class="mb-3">
            <label for="testLanguage" class="form-label" id="testLanguageLabel"></label>
            <select class="form-select" id="testLanguage">
              <!-- 语言选项将由JavaScript动态生成 -->
            </select>
          </div>
          <button id="testHeaderBtn" class="btn btn-success"></button>
          <div id="headerTestResult" class="debug-result"></div>
        </div>
      </div>

      <!-- 自定义语言设置 -->
      <div class="col-md-6">
        <div class="debug-section">
          <button id="resetCustomLangBtn" class="toggle reset-btn-corner"><img src="images/reset.svg" id="resetBtnImg" width="16" height="16" class="invert-on-dark"></button>
          <h4 id="customLangTitle"></h4>
          <p class="text-muted" id="customLangDesc"></p>
          <div class="mb-3">
            <label for="customLanguageInput" class="form-label" id="customLangInputLabel"></label>
            <input type="text" class="form-control" id="customLanguageInput">
          </div>
          <button id="applyCustomLangBtn" class="btn btn-primary"></button>
          <div id="customLangResult" class="debug-result mt-2"></div>
        </div>
      </div>
      <!-- 自定义语言设置结束 -->

      <!-- Accept-Language 格式说明卡片 -->
      <div class="col-md-6">
        <div class="debug-section">
          <h4 id="formatExplanationTitle"></h4>
          <p class="text-muted" id="formatExplanationDesc"></p>
          <p><strong id="basicFormatTitle"></strong></p>
          <ul id="formatList">
            <li id="languageCodeItem"></li>
            <li id="regionCodeItem"></li>
            <li id="qualityValueItem"></li>
          </ul>
          <p><strong id="examplesTitle"></strong></p>
          <ul id="examplesList">
            <li id="exampleEnUs"></li>
            <li id="exampleZhCn"></li>
            <li id="exampleFr"></li>
            <li id="exampleComplex"></li>
          </ul>
          <p class="small text-muted" id="formatNote"></p>
        </div>
      </div>
      <!-- Accept-Language 格式说明卡片结束 -->
    </div>

    <div class="debug-section mt-4">
      <h4 id="liveLogsTitle"></h4>
      <p class="text-muted" id="liveLogsDesc"></p>
      <div class="mb-3">
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="filterInfo" value="info" checked>
          <label class="form-check-label" for="filterInfo" id="infoLabel"></label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="filterWarning" value="warning" checked>
          <label class="form-check-label" for="filterWarning" id="warningLabel"></label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="filterError" value="error" checked>
          <label class="form-check-label" for="filterError" id="errorLabel"></label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="filterSuccess" value="success" checked>
          <label class="form-check-label" for="filterSuccess" id="successLabel"></label>
        </div>
      </div>
      <div id="logOutput" class="debug-result"></div>
      <button id="clearLogsBtn" class="btn btn-secondary btn-sm mt-2"></button>
    </div>

    <div class="debug-section mt-4">
      <h4 id="commonFixesTitle"></h4>
      <p class="text-muted" id="commonFixesDesc"></p>
      <div class="list-group">
        <button id="fixPriorityBtn" class="list-group-item list-group-item-action">
          <strong id="fixPriorityTitle"></strong> <span id="fixPriorityDesc"></span>
        </button>
        <button id="clearAllRulesBtn" class="list-group-item list-group-item-action">
          <strong id="clearReapplyTitle"></strong> <span id="clearReapplyDesc"></span>
        </button>
      </div>
      <div id="fixResult" class="debug-result mt-3"></div>
    </div>

    <div class="debug-section mt-4">
      <h4 id="diagnosticsTitle"></h4>
      <p class="text-muted" id="diagnosticsDesc"></p>
      <button id="showDiagnosticsBtn" class="btn btn-info"></button>
      <div id="diagnosticsResult" class="debug-result"></div>
    </div>

    <!-- 自动切换功能控制 -->
    <div class="debug-section mt-4">
      <h4 id="autoSwitchTitle"></h4>
      <p class="text-muted" id="autoSwitchDesc"></p>
      <div class="form-check form-switch mb-3">
        <input class="form-check-input" type="checkbox" id="autoSwitchToggle">
        <label class="form-check-label" for="autoSwitchToggle" id="enableAutoSwitchLabel"></label>
      </div>
      <button id="showDomainRulesBtn" class="btn btn-outline-primary"></button>
      <div id="domainRulesResult" class="debug-result"></div>
    </div>
    <!-- 自动切换功能控制结束 -->
  </div>

  <script src="shared/shared-utils.js"></script>
  <script src="shared/shared-language-options.js"></script>
  <script src="shared/shared-actions.js"></script>
  <script src="i18n/debug-i18n.js"></script>
  <script src="debug-headers.js"></script>
  <script src="debug-ui.js"></script>
  <script type="module" src="toggle.js"></script>
</body>

</html>